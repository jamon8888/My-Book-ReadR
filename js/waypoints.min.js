/*!
jQuery Waypoints - v1.1
Copyright (c) 2011 Caleb Troughton
Dual licensed under the MIT license and GPL license.
https://github.com/imakewebthings/jquery-waypoints/blob/master/MIT-license.txt
https://github.com/imakewebthings/jquery-waypoints/blob/master/GPL-license.txt

Waypoints is a small jQuery plugin that makes it easy to execute a function
whenever you scroll to an element.

GitHub Repository: https://github.com/imakewebthings/jquery-waypoints
Documentation and Examples: http://imakewebthings.github.com/jquery-waypoints
*/

(function(a,i,e,j){var n=a(j),o=function(a,c){a.element.trigger("waypoint.reached",c);if(a.options.triggerOnce)a.element[i]("destroy")},q=function(a,c){for(var d=c.waypoints.length-1;d>=0&&c.waypoints[d].element[0]!==a[0];)d-=1;return d},k=[],r=function(b){a.extend(this,{element:a(b),oldScroll:-99999,waypoints:[],didScroll:!1,didResize:!1,doScroll:a.proxy(function(){var c=this.element.scrollTop(),d=c>this.oldScroll,b=this,g=a.grep(this.waypoints,function(a){return d?a.offset>b.oldScroll&&a.offset<=
c:a.offset<=b.oldScroll&&a.offset>c}),h=g.length;if(!this.oldScroll||!c)a[e]("refresh");this.oldScroll=c;h&&(d||g.reverse(),a.each(g,function(a,c){if(c.options.continuous||a===h-1)o(c,[d?"down":"up"])}))},this)});a(b).scroll(a.proxy(function(){if(!this.didScroll)this.didScroll=!0,j.setTimeout(a.proxy(function(){this.doScroll();this.didScroll=!1},this),a[e].settings.scrollThrottle)},this)).resize(a.proxy(function(){if(!this.didResize)this.didResize=!0,j.setTimeout(a.proxy(function(){a[e]("refresh");
this.didResize=!1},this),a[e].settings.resizeThrottle)},this));n.load(a.proxy(function(){this.doScroll()},this))},s=function(b){var c=null;a.each(k,function(a,f){if(f.element[0]===b)return c=f,!1});return c},m={init:function(b,c){this.each(function(){var d=a.fn[i].defaults.context,f,g=a(this);if(c&&c.context)d=c.context;a.isWindow(d)||(d=g.closest(d)[0]);f=s(d);f||(f=new r(d),k.push(f));var h=q(g,f),l=a.extend({},h<0?a.fn[i].defaults:f.waypoints[h].options,c);l.offset=l.offset==="bottom-in-view"?
function(){return(a.isWindow(d)?a[e]("viewportHeight"):a(d).height())-a(this).outerHeight()}:l.offset;h<0?f.waypoints.push({element:g,offset:g.offset().top,options:l}):f.waypoints[h].options=l;b&&g.bind("waypoint.reached",b)});a[e]("refresh");return this},remove:function(){return this.each(function(b,c){var d=a(c);a.each(k,function(a,c){var b=q(d,c);b>=0&&c.waypoints.splice(b,1)})})},destroy:function(){return this.unbind("waypoint.reached")[i]("remove")}},p={refresh:function(){a.each(k,function(b,
c){var d=a.isWindow(c.element[0]),f=d?0:c.element.offset().top,g=d?a[e]("viewportHeight"):c.element.height(),h=d?0:c.element.scrollTop();a.each(c.waypoints,function(a,b){var d=b.options.offset,e=b.offset;typeof b.options.offset==="function"?d=b.options.offset.apply(b.element):typeof b.options.offset==="string"&&(d=parseFloat(b.options.offset),d=b.options.offset.indexOf("%")?Math.ceil(g*(d/100)):d);b.offset=b.element.offset().top-f+h-d;c.oldScroll>e&&c.oldScroll<=b.offset?o(b,["up"]):c.oldScroll<e&&
c.oldScroll>=b.offset&&o(b,["down"])});c.waypoints.sort(function(a,b){return a.offset-b.offset})})},viewportHeight:function(){return j.innerHeight?j.innerHeight:n.height()},aggregate:function(){var b=a();a.each(k,function(c,d){a.each(d.waypoints,function(a,c){b=b.add(c.element)})});return b}};a.fn[i]=function(b){if(m[b])return m[b].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof b==="function"||!b)return m.init.apply(this,arguments);else if(typeof b==="object")return m.init.apply(this,
[null,b]);else a.error("Method "+b+" does not exist on jQuery "+i)};a.fn[i].defaults={continuous:!0,offset:0,triggerOnce:!1,context:j};a[e]=function(a){return p[a]?p[a].apply(this):p.aggregate()};a[e].settings={resizeThrottle:200,scrollThrottle:100};n.load(function(){a[e]("refresh")})})(jQuery,"waypoint","waypoints",this);